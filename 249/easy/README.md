Lesson learnt: *Read* the question. I was assuming there was an issue with my code until finally I read the comments and saw notes about the buy/sell ticks not being allowed to be adjacent.
